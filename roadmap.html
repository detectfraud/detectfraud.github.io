<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ö–∞–º—ñ–Ω—å –ª—é–±–æ–≤—ñ ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä –∑ –≥–∞–ª–µ—Ä–µ—è–º–∏</title>
  <style>
    body{ text-align:center; font-family:Arial; background:#f5f5f5; }
    .venwin{ background:#fff; border-radius:10px; padding:10px; display:inline-block; }
    canvas{ border:3px solid #bbb; border-radius:6px; box-shadow:0 6px 18px rgba(0,0,0,.1); display:block; margin:10px auto; }
    #scaleSlider{ width:420px; }
    button{ padding:8px 12px; }
    .disabled{ pointer-events:none; opacity:.5; filter:grayscale(100%); }

    /* === –°—Ç–∏–ª—ñ –≥–∞–ª–µ—Ä–µ–π === */
    .gallery-container {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }
    .gallery-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    .gallery-block > div {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .arrow, .arow {
      font-size: 20px;
      cursor: pointer;
      user-select: none;
      padding: 3px;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 3;
    }
    .arrow:first-child { margin-right: -110px; }
    .arrow:last-child { margin-left: -110px; }
    .arow:first-child { margin-right: -60px; }
    .arow:last-child { margin-left: -60px; }  
    .thumbnails {
      display: flex;
      gap: 10px;
      overflow: hidden;
      width: 600px;
      justify-content: center;
    }
    .thumb-wrapper { position: relative; }
    .thumb {
      width: 108px;
      height: 72px;
      object-fit: cover;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 6px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      z-index: 1;
    }
    #fot {
      display: inline-block;
      cursor: pointer;
      border-radius: 8px;
      width: 108px;
      height: 72px;
      background-image: url(https://detectfraud.github.io/gallery/Para.png);
      background-repeat: no-repeat;
      background-size: contain;
    }
    #fot:hover { mix-blend-mode: luminosity; }
    #fot:active { mix-blend-mode: exclusion; }
    .gallery-container.vows .labels {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      text-align: center;
      margin-bottom: 5px;
    }
    .gallery-container.vows .labels .label1 {
      grid-column: 1;
      font-weight: bold;
      margin-left: 70px; 
    }
    .gallery-container.vows .labels .label2 {
      grid-column: 3;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <fieldset class="venwin" style="height:auto;">
    <center>

      <canvas id="canvas" width="900" height="600"></canvas>
    </center>
    <br><input type="range" id="scaleSlider" min="0.1" max="3" step="0.01" value="1"><br><br>


  <!-- === –ì–∞–ª–µ—Ä–µ—è —Ñ–æ–Ω—ñ–≤ === -->
  <div class="gallery-container">
    <div class="gallery-block">
      <b>–§–æ–Ω</b>
      <div>
        <span class="arrow" onclick="prevSlide()">&#10094;</span>
        <div class="thumbnails" id="thumbs"></div>
        <span class="arrow" onclick="nextSlide()">&#10095;</span>
      </div>
    </div>

    <div class="gallery-block photo-block">
      <b>–§–æ—Ç–æ</b>
      <label id="fot" title="–§–æ—Ç–æ –∑–∞–∫–æ—Ö–∞–Ω–∏—Ö"></label>
    </div>
  </div>

  <!-- === –ì–∞–ª–µ—Ä–µ—è –∫–ª—è—Ç–≤ === -->
  <div class="gallery-container vows">
    <div class="gallery-block">
      <div class="labels">
        <span class="label1">–ù–∞–¥–ø–∏—Å</span>
        <span class="label2">–ö–ª—è—Ç–≤–∞ –∑–∞–∫–æ—Ö–∞–Ω–∏—Ö</span>
      </div>
      <div class="gallery-row">
        <span class="arow" onclick="prevVow()">&#10094;</span>
        <div class="thumbnails" id="thumbsVows"></div>
        <span class="arow" onclick="nextVow()">&#10095;</span>
      </div>
    </div>
  </div>
    <button id="undoBtn" type="button">‚ü≤ Undo</button>
    <button id="previewBtn" type="button">üëÅ –ü–µ—Ä–µ–≥–ª—è–¥</button>
    <button id="downloadBtn" type="button" style="display:none;">üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>      
  </fieldset>
<script>
/* === –ì–ê–õ–ï–†–ï–á === */
const jpg = ".jpeg";
const url = "https://detectfraud.github.io/gallery/";
const images = ["nature(1)","nature(2)","nature(3)","nature(4)","nature(5)","nature(6)","nature(7)","nature(8)","nature(9)","Fon"];
let fullImages = images.map(name => url + name + jpg);

let startIndex = 0;
const thumbsContainer = document.getElementById("thumbs");

function renderThumbnails() {
  thumbsContainer.innerHTML = "";
  const slice = fullImages.slice(startIndex, startIndex + 3);
  slice.forEach(src => createThumb(src, thumbsContainer, false));
}
function createThumb(src, container, isVow) {
  const wrapper = document.createElement("div");
  wrapper.className = "thumb-wrapper";
  const imgName = src.split("/").pop().split(".")[0];
  const thumb = document.createElement("img");
  thumb.className = "thumb";
  thumb.src = src;
  if (!isVow && imgName === "Fon") {
    thumb.title = "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–≤—ñ–π —Ñ–æ–Ω";
    thumb.onclick = () => document.getElementById("bgLoader").click();
  } else {
    thumb.onclick = () => handleGallerySelect(src, isVow ? "love" : "bg");
  }
  wrapper.appendChild(thumb);
  container.appendChild(wrapper);
}
function prevSlide() { startIndex = (startIndex - 3 + fullImages.length) % fullImages.length; renderThumbnails(); }
function nextSlide() { startIndex = (startIndex + 3) % fullImages.length; renderThumbnails(); }
renderThumbnails();

// –§–æ—Ç–æ –∫–Ω–æ–ø–∫–∞
document.getElementById("fot").onclick = () => document.getElementById("loveLoader").click();

// –ì–∞–ª–µ—Ä–µ—è –∫–ª—è—Ç–≤
const png = ".png";
const vows = ["LoveStones","Eternity","Fidelity","Joy","Love","Strength","Tenderness","Trust","Unity","Heart"];
const fullVows = vows.map(name => url + name + png);
let vowIndex = 0;
const thumbsVows = document.getElementById("thumbsVows");
function renderVows() {
  thumbsVows.innerHTML = "";
  const slice = fullVows.slice(vowIndex, vowIndex + 4);
  slice.forEach(src => createThumb(src, thumbsVows, true));
}
function prevVow(){ vowIndex = (vowIndex - 4 + fullVows.length) % fullVows.length; renderVows(); }
function nextVow(){ vowIndex = (vowIndex + 4) % fullVows.length; renderVows(); }
renderVows();

/* === –†–ï–î–ê–ö–¢–û–† (–∞–¥–∞–ø—Ç–æ–≤–∞–Ω–∏–π –ø—ñ–¥ –≥–∞–ª–µ—Ä–µ—ó) === */
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const scaleSlider = document.getElementById('scaleSlider');
const undoBtn = document.getElementById('undoBtn');
const previewBtn = document.getElementById('previewBtn');
const downloadBtn = document.getElementById('downloadBtn');
// –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ input –¥–ª—è —Å–≤–æ—ó—Ö —Ñ–æ—Ç–æ
const bgLoader = document.createElement("input");
bgLoader.type="file"; bgLoader.id="bgLoader"; bgLoader.accept="image/*"; bgLoader.style.display="none"; document.body.appendChild(bgLoader);
const loveLoader = document.createElement("input");
loveLoader.type="file"; loveLoader.id="loveLoader"; loveLoader.accept="image/*"; loveLoader.style.display="none"; document.body.appendChild(loveLoader);

// –î–∞–ª—ñ –ª–∏—à–∞—î—Ç—å—Å—è —Ç–≤—ñ–π –∫–æ–¥ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (drawAll, undo, preview‚Ä¶) –∞–ª–µ –∞–¥–∞–ø—Ç–æ–≤–∞–Ω–∏–π ‚Äî –∑–∞–º—ñ—Å—Ç—å fileReader –≤ –≥–∞–ª–µ—Ä–µ—ó –º–∏ –≤–∏–∫–ª–∏–∫–∞—î–º–æ handleGallerySelect(src,"bg"/"love")

function handleGallerySelect(src, key){
  const img = new Image();
  img.onload = ()=>{
    layers[key].img = img;
    layers[key].src = src;
    layers[key].x = canvas.width/2;
    layers[key].y = canvas.height/2;
    layers[key].scale = 1;
    activeLayer = key;
    scaleSlider.value = 1;
    pushHistory();
    drawAll();
  };
  img.src = src;
}

/* ... —Ä–µ—à—Ç–∞ —Ç–≤–æ–≥–æ –∫–æ–¥—É —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –±–µ–∑ –∑–º—ñ–Ω (drawAll, undo, preview, download, –ø–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è —ñ —Ç.–¥.) ... */

</script>
</body>
</html>
