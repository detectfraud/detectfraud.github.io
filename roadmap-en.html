<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–ö–∞–º—ñ–Ω—å –ª—é–±–æ–≤—ñ ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä</title>

  <style>
    /* –ë–∞–∑–æ–≤—ñ —Å—Ç–∏–ª—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ */
    body {
      text-align:center;            /* –í–∏—Ä—ñ–≤–Ω—é—î–º–æ –≤—Å–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
      font-family:sans-serif;       /* –ü—Ä–æ—Å—Ç–∏–π —à—Ä–∏—Ñ—Ç */
    }

    /* –û–±–≥–æ—Ä—Ç–∫–∞ –≤—ñ–∫–Ω–∞ */
    .venwin {
      background: #fff;             /* –ë—ñ–ª–∏–π —Ñ–æ–Ω */
      border-radius:10px;           /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω—ñ –∫—É—Ç–∏ */
      padding:10px;
      display:inline-block;         /* –©–æ–± –±–ª–æ–∫ –æ–±—Ç—è–≥—É–≤–∞–≤ –≤–º—ñ—Å—Ç */
    }

    /* –ü–æ–ª–æ—Ç–Ω–æ –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è */
    canvas {
      border:3px solid #bbb;        /* –°—ñ—Ä–∞ —Ä–∞–º–∫–∞ */
      border-radius:6px;            /* –õ–µ–≥–∫–µ –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—è */
      box-shadow:0 6px 18px rgba(0,0,0,.1); /* –¢—ñ–Ω—å */
      display:block;
      margin:10px auto;             /* –¶–µ–Ω—Ç—Ä—É—î–º–æ */
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è */
    #controls{
      margin-top:10px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;               /* –ü–µ—Ä–µ–Ω–æ—Å —Ä—è–¥–∫—ñ–≤ */
    }

    /* –ü–æ–≤–∑—É–Ω–æ–∫ –º–∞—Å—à—Ç–∞–±—É */
    #scaleSlider{
      width:420px;
    }

    /* –ö–Ω–æ–ø–∫–∏ */
    button{
      padding:8px 12px;
    }

    /* –î–∏–∑–∞–±–ª —Ä–µ–∂–∏–º */
    .disabled {
      pointer-events: none;         /* –ë–ª–æ–∫—É—î –∫–ª—ñ–∫–∏ */
      opacity: 0.5;                 /* –†–æ–±–∏—Ç—å –Ω–∞–ø—ñ–≤–ø—Ä–æ–∑–æ—Ä–∏–º */
      filter: grayscale(100%);      /* –ß–æ—Ä–Ω–æ-–±—ñ–ª–∏–π –≤–∏–≥–ª—è–¥ */
    }
  </style>
</head>

<body>
<fieldset class="venwin" style="height:auto;">
  <center>
    <span style="color:#990000;font-size:x-large;">–ö–∞–º—ñ–Ω—å –ª—é–±–æ–≤—ñ</span><br><br>

    <!-- –ü–æ–ª–æ—Ç–Ω–æ –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è -->
    <canvas id="canvas" width="900" height="600" style="border:1px solid #ccc;"></canvas>
    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è -->
    <div id="controls">
      <!-- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ–Ω—É -->
      <label>–§–æ–Ω: <input type="file" id="bgLoader" accept="image/*"></label><br>

      <!-- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑–∞–∫–æ—Ö–∞–Ω–∏—Ö -->
      <label>–§–æ—Ç–æ –∑–∞–∫–æ—Ö–∞–Ω–∏—Ö: <input type="file" id="loveLoader" accept="image/*"></label><br>

      <!-- –ü–æ–≤–∑—É–Ω–æ–∫ –º–∞—Å—à—Ç–∞–±—É -->
      <input type="range" id="scaleSlider" min="0.1" max="3" step="0.01" value="1"><br><br>

      <!-- –ö–Ω–æ–ø–∫–∏ -->
      <button id="undoBtn">‚ü≤ Undo</button>
      <button id="previewBtn">üëÅ –ü–µ—Ä–µ–≥–ª—è–¥</button>
      <button id="downloadBtn" style="display:none;">üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
    </div>
  </center>
</fieldset>

<script>
/* === –ü–Ü–î–ì–û–¢–û–í–ö–ê CANVAS —Ç–∞ –ï–õ–ï–ú–ï–ù–¢–Ü–í === */
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');     // –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–∞–ª—é–≤–∞–Ω–Ω—è

const bgLoader = document.getElementById('bgLoader');       // –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á —Ñ–æ–Ω—É
const loveLoader = document.getElementById('loveLoader');   // –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á love-—Ñ–æ—Ç–æ
const scaleSlider = document.getElementById('scaleSlider'); // –ø–æ–≤–∑—É–Ω–æ–∫ –º–∞—Å—à—Ç–∞–±—É
const undoBtn = document.getElementById('undoBtn');         // –∫–Ω–æ–ø–∫–∞ Undo
const previewBtn = document.getElementById('previewBtn');   // –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É
const downloadBtn = document.getElementById('downloadBtn'); // –∫–Ω–æ–ø–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

/* –û–±‚Äô—î–∫—Ç –º–∞—Å–∫–∏ (–≤–∏—Ä—ñ–∑–∞–Ω–µ –∫–æ–ª–æ) */
let mask = { cx: 0, cy: 0, r: 0 };

/* –ø—Ä–∞–ø–æ—Ä–µ—Ü—å: —á–∏ –∞–∫—Ç–∏–≤–Ω–∞ –¥—ñ—Ä–∫–∞ —É —Ñ–æ–Ω—ñ */
let bgHoleActive = false;

/* –ó–º—ñ–Ω–Ω—ñ –¥–ª—è drag&drop */
let dragging = false, dragStartX = 0, dragStartY = 0;

/* –®–∞–±–ª–æ–Ω-—Ä–∞–º–∫–∞ –ø–æ–≤–µ—Ä—Ö —É—Å—å–æ–≥–æ */
const template = new Image();
template.src = 'images/priroda.jpg'; //images/LoveStone.png

/* –°–∏—Å—Ç–µ–º–∞ —à–∞—Ä—ñ–≤ */
let layers = {
  bg:   { img: null, src: null, x: canvas.width/2, y: canvas.height/2, scale: 1 },
  love: { img: null, src: null, x: canvas.width/2, y: canvas.height/2, scale: 1 }
};

/* –ê–∫—Ç–∏–≤–Ω–∏–π —à–∞—Ä */
let activeLayer = null; // 'bg' –∞–±–æ 'love'

/* –†–µ–∂–∏–º –ø–µ—Ä–µ–≥–ª—è–¥—É */
let previewMode = false;

/* –Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω (–¥–ª—è Undo) */
const history = [];
const MAX_HISTORY = 20;

/* –ó—Ä–æ–±–∏—Ç–∏ "—Å–Ω–µ–ø—à–æ—Ç" –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É */
function makeSnapshot(){
  return {
    bg: { src: layers.bg.src, x: layers.bg.x, y: layers.bg.y, scale: layers.bg.scale },
    love: { src: layers.love.src, x: layers.love.x, y: layers.love.y, scale: layers.love.scale },
    previewMode: previewMode,
    activeLayer: activeLayer,
    bgHoleActive: bgHoleActive
  };
}

/* –î–æ–¥–∞—Ç–∏ —Å—Ç–∞–Ω —É —ñ—Å—Ç–æ—Ä—ñ—é */
function pushHistory(){
  history.push(makeSnapshot());
  if(history.length > MAX_HISTORY) history.shift(); // —è–∫—â–æ –∑–∞–±–∞–≥–∞—Ç–æ ‚Äî —Å—Ç–∏—Ä–∞—î–º–æ —Å—Ç–∞—Ä—ñ
}

/* –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω –∑ —ñ—Å—Ç–æ—Ä—ñ—ó */
function applySnapshot(snapshot){
  previewMode = !!snapshot.previewMode;
  activeLayer = snapshot.activeLayer || null;
  bgHoleActive = !!snapshot.bgHoleActive;

  const jobs = []; // –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å

  ['bg','love'].forEach(key => {
    const s = snapshot[key];
    if(s && s.src){
      const img = new Image();
      const p = new Promise((res) => {
        img.onload = () => {
          layers[key].img = img;
          layers[key].src = s.src;
          layers[key].x = s.x;
          layers[key].y = s.y;
          layers[key].scale = s.scale;
          res();
        };
        img.onerror = () => { // —è–∫—â–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∞—Å—å
          layers[key].img = null;
          layers[key].src = null;
          res();
        };
      });
      img.src = s.src;
      jobs.push(p);
    } else {
      // —è–∫—â–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω—î
      layers[key].img = null;
      layers[key].src = null;
      layers[key].x = s ? s.x : canvas.width/2;
      layers[key].y = s ? s.y : canvas.height/2;
      layers[key].scale = s ? s.scale : 1;
    }
  });

  toggleButtons();
  if(jobs.length) return Promise.all(jobs).then(drawAll);
  drawAll();
  return Promise.resolve();
}

/* –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è: –∑–±–µ—Ä—ñ–≥–∞—î–º–æ —Å—Ç–∞—Ä—Ç–æ–≤–∏–π —Å—Ç–∞–Ω */
pushHistory();

/* –§—É–Ω–∫—Ü—ñ—è –º–∞–ª—é–≤–∞–Ω–Ω—è —à–∞—Ä—É */
function drawLayerTo(ctxTarget, layer){
  if(!layer || !layer.img) return;
  const w = layer.img.width * layer.scale;
  const h = layer.img.height * layer.scale;
  ctxTarget.drawImage(layer.img, layer.x - w/2, layer.y - h/2, w, h);
}

/* –ú–∞–ª—é—î–º–æ —Ñ–æ—Ç–æ love –∑ –æ–ø—Ü—ñ—î—é clip –ø–æ –∫–æ–ª—É */
function drawLove(ctxTarget, clip=false){
  const layer = layers.love;
  if(!layer || !layer.img) return;
  const w = layer.img.width * layer.scale;
  const h = layer.img.height * layer.scale;
  ctxTarget.save();
  if (clip && mask.r > 0){
    ctxTarget.beginPath();
    ctxTarget.arc(mask.cx, mask.cy, mask.r, 0, Math.PI*2);
    ctxTarget.clip();
  }
  ctxTarget.drawImage(layer.img, layer.x - w/2, layer.y - h/2, w, h);
  ctxTarget.restore();
}

/* –ú–∞–ª—é—î–º–æ —Ñ–æ–Ω –∑ "–¥—ñ—Ä–∫–æ—é" */
function drawBgWithHole(ctxTarget){
  if(!layers.bg.img) return;

  if(!bgHoleActive || mask.r <= 0){
    drawLayerTo(ctxTarget, layers.bg); // –±–µ–∑ –¥—ñ—Ä–∫–∏
    return;
  }

  // –º–∞–ª—é—î–º–æ —É —Ç–∏–º—á–∞—Å–æ–≤–∏–π canvas
  const off = document.createElement('canvas');
  off.width = canvas.width;
  off.height = canvas.height;
  const octx = off.getContext('2d');

  drawLayerTo(octx, layers.bg);

  // –ø—Ä–æ–±–∏–≤–∞—î–º–æ –∫—Ä—É–≥–ª—É –¥—ñ—Ä–∫—É
  octx.globalCompositeOperation = 'destination-out';
  octx.beginPath();
  octx.arc(mask.cx, mask.cy, mask.r, 0, Math.PI*2);
  octx.fill();
  octx.globalCompositeOperation = 'source-over';

  ctxTarget.drawImage(off, 0, 0);
}

/* –ó–∞–≥–∞–ª—å–Ω–µ –ø–µ—Ä–µ–º–∞–ª—å–æ–≤—É–≤–∞–Ω–Ω—è */
function drawAll(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(!previewMode){
    drawBgWithHole(ctx);
    drawLove(ctx, false);
  } else {
    drawLove(ctx, true);
    drawBgWithHole(ctx);
  }
  if(template.complete) ctx.drawImage(template, 0, 0, canvas.width, canvas.height);
}

/* –ü–µ—Ä–µ–º–∏–∫–∞—á –∫–Ω–æ–ø–æ–∫ Preview/Download */
function toggleButtons(){
  if(previewMode){
    previewBtn.style.display = 'none';
    downloadBtn.style.display = 'inline-block';
  } else {
    previewBtn.style.display = 'inline-block';
    downloadBtn.style.display = 'none';
  }
}

/* –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏–Ω–∫–∏ —É —à–∞—Ä */
function handleFileLoad(file, key){
  if(!file) return;
  const reader = new FileReader();
  reader.onload = e => {
    const data = e.target.result;
    const img = new Image();
    img.onload = () => {
      layers[key].img = img;
      layers[key].src = data;
      layers[key].x = canvas.width/2;
      layers[key].y = canvas.height/2;
      layers[key].scale = 1;
      activeLayer = key;
      scaleSlider.value = 1;
      pushHistory();
      drawAll();
    };
    img.src = data;
  };
  reader.readAsDataURL(file);
}

/* –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –§–û–ù–£ */
bgLoader.addEventListener('change', e => handleFileLoad(e.target.files[0], 'bg'));

/* –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è LOVE */
loveLoader.addEventListener('change', e => {
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    const data = ev.target.result;
    const img = new Image();
    img.onload = () => {
      bgHoleActive = true; // –≤–º–∏–∫–∞—î–º–æ –≤–∏—Ä—ñ–∑ –¥—ñ—Ä–∫–∏
      layers.love.img = img;
      layers.love.src = data;
      layers.love.x = canvas.width/2;
      layers.love.y = canvas.height/2;
      layers.love.scale = 1;
      activeLayer = 'love';
      scaleSlider.value = 1;
      pushHistory();
      drawAll();
    };
    img.src = data;
  };
  reader.readAsDataURL(file);
});

/* --- –î–†–ê–ì –Ü DROP –¥–ª—è –ø–µ—Ä–µ—Å—É–≤–∞–Ω–Ω—è —à–∞—Ä—É --- */
canvas.addEventListener('mousedown', e => {
  if(previewMode || !activeLayer) return;
  dragging = true;
  dragStartX = e.offsetX - layers[activeLayer].x;
  dragStartY = e.offsetY - layers[activeLayer].y;
});
canvas.addEventListener('mousemove', e => {
  if(previewMode || !dragging || !activeLayer) return;
  layers[activeLayer].x = e.offsetX - dragStartX;
  layers[activeLayer].y = e.offsetY - dragStartY;
  drawAll();
});
canvas.addEventListener('mouseup', () => {
  if(previewMode) return;
  if(dragging){ dragging=false; pushHistory(); }
});
canvas.addEventListener('mouseleave', () => {
  if(previewMode) return;
  if(dragging){ dragging=false; pushHistory(); }
});

/* --- TOUCH –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ --- */
canvas.addEventListener('touchstart', e => {
  if(previewMode || !activeLayer) return;
  const t = e.touches[0];
  const rect = canvas.getBoundingClientRect();
  dragging = true;
  dragStartX = t.clientX - rect.left - layers[activeLayer].x;
  dragStartY = t.clientY - rect.top - layers[activeLayer].y;
  e.preventDefault();
});
canvas.addEventListener('touchmove', e => {
  if(previewMode || !dragging || !activeLayer) return;
  const t = e.touches[0];
  const rect = canvas.getBoundingClientRect();
  layers[activeLayer].x = t.clientX - rect.left - dragStartX;
  layers[activeLayer].y = t.clientY - rect.top - dragStartY;
  drawAll();
  e.preventDefault();
});
canvas.addEventListener('touchend', () => {
  if(previewMode) return;
  if(dragging){ dragging=false; pushHistory(); }
});

/* --- UNDO --- */
undoBtn.addEventListener('click', () => {
  if(history.length <= 1) return;
  history.pop(); // –≤–∏–¥–∞–ª—è—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π
  const prev = history[history.length-1];
  applySnapshot(prev);
});

/* --- PREVIEW --- */
previewBtn.addEventListener('click', () => {
  previewMode = true;
  pushHistory();
  toggleButtons();
  drawAll();
});

/* --- DOWNLOAD --- */
downloadBtn.addEventListener('click', () => {
  const link = document.createElement('a');
  link.download = 'composition.png';
  link.href = canvas.toDataURL('image/png');
  link.click();
});


/*–ö–æ–ª–∏ —à–∞–±–ª–æ–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è ‚Äî –æ–±—á–∏—Å–ª—é—î–º–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –¥—ñ—Ä–∫–∏ */
template.onload = function(){
  let tempCanvas = document.createElement("canvas");
  tempCanvas.width = canvas.width;
  tempCanvas.height = canvas.height;
  let tctx = tempCanvas.getContext("2d");
  tctx.drawImage(template, 0, 0, canvas.width, canvas.height);

  let imgData = tctx.getImageData(0, 0, canvas.width, canvas.height);
  let data = imgData.data;

  let xs = [], ys = [];

  for(let y=0; y<canvas.height; y++){
    for(let x=0; x<canvas.width; x++){
      let alpha = data[(y*canvas.width + x)*4 + 3]; // –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª
      if(alpha < 50){ // —è–∫—â–æ –ø—ñ–∫—Å–µ–ª—å –ø—Ä–æ–∑–æ—Ä–∏–π
        xs.push(x);
        ys.push(y);
      }
    }
  }

  if(xs.length > 0){
    // —Å–µ—Ä–µ–¥–∏–Ω–∞ –≤—Å—ñ—Ö –ø—Ä–æ–∑–æ—Ä–∏—Ö —Ç–æ—á–æ–∫
    let avgX = xs.reduce((a,b)=>a+b,0)/xs.length;
    let avgY = ys.reduce((a,b)=>a+b,0)/ys.length;
    mask.cx = avgX;
    mask.cy = avgY;

    // –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å = —Ä–∞–¥—ñ—É—Å
    let maxDist = 0;
    for(let i=0; i<xs.length; i++){
      let dx = xs[i]-avgX, dy = ys[i]-avgY;
      let dist = Math.sqrt(dx*dx + dy*dy);
      if(dist > maxDist) maxDist = dist;
    }
    mask.r = maxDist;
  }

  drawAll();
};
/* –°—Ç–∞—Ä—Ç–æ–≤–µ –ø–µ—Ä–µ–º–∞–ª—å–æ–≤—É–≤–∞–Ω–Ω—è */
applySnapshot(history[0] || makeSnapshot());

/* –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è/—Ä–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ */
function setDisabled(state) {
  const controls = document.querySelectorAll("input:not(#background):not(#love), #scaleSlider");
  controls.forEach(ctrl => {
    if (state) {
      ctrl.disabled = true;
      ctrl.classList.add("disabled");
    } else {
      ctrl.disabled = false;
      ctrl.classList.remove("disabled");
    }
  });
}

/* –ü—Ä–∏–≤‚Äô—è–∑–∫–∞ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –±–ª–æ–∫—É–≤–∞–Ω–Ω—è */
document.getElementById("previewBtn").addEventListener("click", () => {
  setDisabled(true);
});
document.getElementById("undoBtn").addEventListener("click", () => {
  setDisabled(false);
});
//–í–∏—Ä—ñ–∑
function roundWin() {
        const canvas = document.getElementById('canvas');
        const ictx = canvas.getContext('2d');
        const img = new Image();

        // –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ —à–ª—è—Ö –¥–æ –≤–∞—à–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
        img.src = 'images/LoveStone.png';

        img.onload = () => {
            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–∑–º—ñ—Ä–∏ Canvas —è–∫ —É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
            canvas.width = img.width;
            canvas.height = img.height;

            // –ö—Ä–æ–∫ 1: –ú–∞–ª—é—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ Canvas
            ictx.drawImage(img, 0, 0);

            // –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è –∫–æ–ª–∞
            const centerX = (canvas.width / 2)+6;
            const centerY = (canvas.height / 2)-115;
            const radius = 98;

            // –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä—é—î–º–æ –ø—Ä–æ–∑–æ—Ä–∏–π –µ—Ñ–µ–∫—Ç
         // ictx.globalCompositeOperation = 'destination-out';

            // –ö—Ä–æ–∫ 4: –ú–∞–ª—é—î–º–æ –∫–æ–ª–æ, —è–∫–µ –∑—Ä–æ–±–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –ø—Ä–æ–∑–æ—Ä–æ—é
            ictx.beginPath();
            ictx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ictx.fillStyle = 'red'; // –ö–æ–ª—ñ—Ä –Ω–µ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ 'destination-out'
            ictx.fill();
        };
}
</script>
</body>
</html>
