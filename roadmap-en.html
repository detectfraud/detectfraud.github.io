<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Знайти зелене коло</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        canvas {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

    <h1>Пошук зеленого кола</h1>
    <canvas id="myCanvas"></canvas>
    <p id="result"></p>

    <script>
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');
        const img = new Image();
        
        // Замініть на шлях до вашого зображення
        // Зауваження: Для роботи з локальними файлами може знадобитися сервер.
        img.src = 'images/LoveStoneG.png'; 

        img.onload = () => {
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0);

            findGreenCircle();
        };

        function findGreenCircle() {
            // Отримуємо дані про всі пікселі зображення
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;

            // Ініціалізуємо межі кола
            let minX = canvas.width, minY = canvas.height;
            let maxX = 0, maxY = 0;
            let found = false;

            // Проходимо по кожному пікселю
            for (let y = 0; y < canvas.height; y++) {
                for (let x = 0; x < canvas.width; x++) {
                    // Індекс пікселя в масиві даних (R, G, B, A)
                    const index = (y * canvas.width + x) * 4;
                    const r = data[index];
                    const g = data[index + 1];
                    const b = data[index + 2];

                    // Перевіряємо, чи піксель "зелений"
                    // Можна налаштувати ці значення для більшої точності
                    if (g > 150 && r < 100 && b < 100) {
                        found = true;
                        if (x < minX) minX = x;
                        if (x > maxX) maxX = x;
                        if (y < minY) minY = y;
                        if (y > maxY) maxY = y;
                    }
                }
            }

            const resultElement = document.getElementById('result');

            if (found) {
                // Обчислюємо діаметр та координати
                const diameterX = maxX - minX;
                const diameterY = maxY - minY;
                const diameter = (diameterX + diameterY) / 2; // Беремо середнє
                const centerX = minX + diameterX / 2;
                const centerY = minY + diameterY / 2;
                
                resultElement.innerHTML = `
                    Знайдено зелене коло!<br>
                    Центр: (${Math.round(centerX)}, ${Math.round(centerY)})<br>
                    Діаметр: ${Math.round(diameter)}px
                `;

                // Для візуалізації: малюємо контур знайденого кола
                ctx.beginPath();
                ctx.strokeStyle = 'red';
                ctx.lineWidth = 2;
                ctx.arc(centerX, centerY, diameter / 2, 0, 2 * Math.PI);
                ctx.stroke();

            } else {
                resultElement.textContent = "Зелене коло не знайдено.";
            }
        }
    </script>
</body>
</html>
